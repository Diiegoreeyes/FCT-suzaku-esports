<div class="admin-post-card" *ngFor="let p of posts; trackBy: trackById">
  <!-- â€”â€”â€” MODO EDICIÃ“N â€”â€”â€” -->
  <ng-container *ngIf="editId === p.id; else vista">
    <div class="edit-row">
      <label class="edit-label">TÃ­tulo</label>
      <input class="input" [(ngModel)]="editTitulo" />
    </div>

    <div class="edit-row">
      <label class="edit-label">DescripciÃ³n</label>
      <textarea class="textarea" rows="3" [(ngModel)]="editDescripcion"></textarea>
    </div>

    <div class="edit-row">
      <label class="edit-label">Orden</label>
      <input class="input" type="number" min="0" [(ngModel)]="editOrden" />
    </div>

    <div class="edit-row">
      <label class="edit-label">Imagen</label>
      <input type="file" (change)="onEditFileChange($event)" />
      <img
        *ngIf="editPreviewUrl || p.imagen"
        [src]="editPreviewUrl || p.imagen"
        class="post-img"
      />
    </div>

    <div class="acciones-card">
      <button class="btn btn-success" (click)="guardarEdicion()">ğŸ’¾ Guardar</button>
      <button class="btn btn-secundario" (click)="cancelarEdicion()">âœ–ï¸ Cancelar</button>
    </div>
  </ng-container>

  <!-- â€”â€”â€” VISTA NORMAL â€”â€”â€” -->
  <ng-template #vista>
    <div class="post-header-left">
      <img *ngIf="p.imagen" [src]="p.imagen" class="post-img" />
      <div class="post-info">
        <h3>{{ p.titulo }}</h3>
        <span>Orden: {{ p.orden }}</span>
      </div>
    </div>

    <p class="admin-post-descripcion">{{ p.descripcion }}</p>

    <div class="acciones-card">
      <button class="btn btn-warning" (click)="iniciarEdicion(p)">âœï¸</button>
      <button class="btn btn-danger" (click)="eliminarPost(p.id)">ğŸ—‘ï¸</button>
    </div>
  </ng-template>
</div>
