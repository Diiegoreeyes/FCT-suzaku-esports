<section class="productos-layout">
  <!-- Filtros a la izquierda -->
  <aside class="sidebar-filtros">
    <h3>Filtrar Productos</h3>
  
    <!-- Buscar por nombre -->
    <input
      type="text"
      [(ngModel)]="filtroNombre"
      placeholder="Buscar por nombre"
      class="input-filtro"
    />
  
    <!-- Precio -->
    <input
      type="number"
      [(ngModel)]="precioMin"
      placeholder="Precio mínimo"
      class="input-filtro"
    />
    <input
      type="number"
      [(ngModel)]="precioMax"
      placeholder="Precio máximo"
      class="input-filtro"
    />
  
    <!-- Tipo -->
    <select [(ngModel)]="filtroTipo" class="input-filtro">
      <option value="">Todos los tipos</option>
      <option *ngFor="let t of tiposDisponibles" [value]="t">
        {{ t }}
      </option>
    </select>
  
    <!-- Categoría -->
    <select [(ngModel)]="filtroCategoria" class="input-filtro">
      <option value="">Todas las categorías</option>
      <option *ngFor="let c of categoriasDisponibles" [value]="c">
        {{ c }}
      </option>
    </select>
  
    <!-- Tallas -->
    <div class="grupo-checks">
      <label *ngFor="let t of tallasDisponibles">
        <input
          type="checkbox"
          (change)="onTallaToggle(t, $any($event.target).checked)"
        />
        {{ t }}
      </label>
    </div>
  
    <!-- Colores -->
    <div class="grupo-checks">
      <label *ngFor="let c of coloresDisponibles">
        <input
          type="checkbox"
          (change)="onColorToggle(c.nombre, $any($event.target).checked)"
        />
        <span
          class="circle-color"
          [style.backgroundColor]="c.codigo_hex"
        ></span>
        {{ c.nombre }}
      </label>
    </div>
  
    <button (click)="aplicarFiltros()" class="btn-filtrar">Aplicar Filtros</button>
    <button (click)="resetFiltros()" class="btn-reset">Reiniciar</button>
  </aside>
  

  <div class="contenido-productos">
    <h2>Lista de Productos</h2>
  
    <!-- Contenedor grid -->
    <div class="productos-container">
      <a
        *ngFor="let p of productosFiltrados; trackBy: trackProducto"
        [routerLink]="['/producto', p.id]"
        class="producto-card"
        style="text-decoration: none; color: inherit;"
      >
        <h3 class="producto-titulo">{{ p.nombre }}</h3>
        <p class="precio">{{ p.precio }} €</p>
  
        <!-- Imagen con colores superpuestos -->
        <div class="imagen-con-colores">
          <img
            [src]="getProductoFoto(p.imagen_principal)"
            alt="{{ p.nombre }}"
            class="producto-img"
            [attr.data-id]="p.id"
          />
          <div class="colores-sobre-imagen-vertical" *ngIf="p.colores?.length">
            <span
              class="circle-color"
              *ngFor="let c of p.colores"
              [style.backgroundColor]="c.codigo_hex || '#ccc'">
            </span>
          </div>
        </div>
  
        <!-- Tallas -->
        <div class="talla-group" *ngIf="p.tallas?.length">
          <span class="badge-talla" *ngFor="let t of p.tallas">{{ t.nombre }}</span>
        </div>
      </a>
    </div>
  </div>
  

</section>
