<section class="productos-layout">
  <!-- Filtros a la izquierda -->
  <aside class="sidebar-filtros">
    <h3>Filtrar Productos</h3>

    <input
      type="text"
      [(ngModel)]="filtroNombre"
      placeholder="Buscar por nombre"
      class="input-filtro"
    />

    <input
      type="number"
      [(ngModel)]="precioMin"
      placeholder="Precio mínimo"
      class="input-filtro"
    />

    <input
      type="number"
      [(ngModel)]="precioMax"
      placeholder="Precio máximo"
      class="input-filtro"
    />

    <button (click)="aplicarFiltros()" class="btn-filtrar">Aplicar Filtros</button>
    <button (click)="resetFiltros()" class="btn-reset">Reiniciar</button>
  </aside>

  <!-- Productos a la derecha -->
  <div class="contenido-productos">
    <h2>Lista de Productos</h2>

    <div class="productos-container">
      <a
        *ngFor="let p of productosFiltrados; trackBy: trackProducto"
        [routerLink]="['/producto', p.id]"
        class="producto-card"
        style="text-decoration: none; color: inherit;"
      >
        <h3 class="producto-titulo">{{ p.nombre }}</h3>

        <div class="producto-card-content">
          <!-- Imagen -->
          <img
            [src]="getProductoFoto(p.imagen_principal)"
            alt="{{ p.nombre }}"
            class="producto-img"
            [attr.data-id]="p.id"
          />

          <!-- Info derecha -->
          <div class="producto-info-extra">
            <p class="precio">{{ p.precio }} €</p>

            <!-- Colores -->
            <div class="color-group" *ngIf="p.colores?.length">
              <span
                class="circle-color"
                *ngFor="let c of p.colores"
                [style.backgroundColor]="c.codigo_hex || '#ccc'"
              ></span>
            </div>

            <!-- Tallas -->
            <div class="talla-group" *ngIf="p.tallas?.length">
              <span class="badge-talla" *ngFor="let t of p.tallas">{{ t.nombre }}</span>
            </div>
          </div>
        </div>

        <p class="descripcion">{{ p.descripcion }}</p>

        <button class="btn-agregar" (click)="$event.preventDefault(); agregarAlCarrito(p)">
          Agregar al carrito
        </button>
      </a>
    </div>
  </div>
</section>
