<div *ngIf="producto" class="producto-detalle-container">
  <!-- Imagen principal -->
  <div class="imagen-principal">
    <img [src]="imagenActual" alt="Imagen del producto" class="imagen-grande" />
  </div>

  <!-- Miniaturas -->
  <div class="miniaturas">
    <img
      *ngFor="let img of galeriaImagenes"
      [src]="img"
      class="miniatura"
      (click)="cambiarImagen(img)"
      [class.activa]="imagenActual === img"
    />
  </div>

  <!-- Info del producto -->
  <div class="producto-info">
    <h1>{{ producto.nombre }}</h1>
    <p class="descripcion">{{ producto.descripcion }}</p>
    <p class="precio">{{ producto.precio }} ‚Ç¨</p>

    <!-- Selector de color -->
    <div class="selector">
      <label>Color:</label>
      <div class="circle-color-group">
        <span
          *ngFor="let color of coloresDisponibles"
          class="circle-color"
          [style.backgroundColor]="obtenerColorHex(color)"
          [class.activo]="color === colorSeleccionado"
          (click)="colorSeleccionado = color; actualizarGaleria(); actualizarStock()"
          ></span>
      </div>
    </div>

    <!-- Selector de talla -->
    <div class="talla-group">
      <span
        class="badge-talla"
        *ngFor="let talla of tallasDisponibles"
        [class.seleccionado]="talla === tallaSeleccionada"
        [class.sin-stock]="!hayStockPara(talla)"
        (click)="hayStockPara(talla) && seleccionarTalla(talla)"
      >
        {{ talla }} <span *ngIf="!hayStockPara(talla)">‚ùå</span>
      </span>
    </div>


    <!-- Stock -->
    <div class="stock-info">
      <p *ngIf="stockSeleccionado">Stock disponible: {{ stockSeleccionado.cantidad }}</p>
      <p *ngIf="!stockSeleccionado">Selecciona una combinaci√≥n v√°lida</p>

      <button
        [disabled]="!stockSeleccionado?.cantidad"
        class="add-to-cart"
        (click)="agregarAlCarrito()"
      >
        A√±adir al carrito üõí
      </button>
    </div>

    <!-- Info extra -->
    <div class="info-extra">
      <p><strong>Tipo:</strong> {{ producto.tipo?.nombre }}</p>
      <p><strong>Categor√≠a:</strong> {{ producto.categoria?.nombre }}</p>
    </div>
  </div>
</div>
